<!DOCTYPE html>
<html lang="fr">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Salle d'Attente - Loup Garou Ultimate</title>

        <!-- Favicon -->
        <link rel="icon" type="image/svg+xml" href="images/favicon.svg">

        <!-- Google Fonts -->
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Slab:wght@400;500;600&display=swap"
            rel="stylesheet">

        <!-- Waiting Room Stylesheet -->
        <link rel="stylesheet" href="css/waiting-room.css">
    </head>

    <body>
        <div class="container">
            <!-- Home Screen -->
            <div id="home-screen" class="screen active">
                <h1>üê∫ Loup Garou Ultimate</h1>
                <p class="subtitle">Rejoignez une partie multijoueur</p>

                <div class="button-group">
                    <button id="create-room-btn" class="btn btn-primary">
                        <span class="icon">‚ûï</span>
                        Cr√©er une Partie
                    </button>
                    <button id="join-room-btn" class="btn btn-secondary">
                        <span class="icon">üö™</span>
                        Rejoindre une Partie
                    </button>
                </div>

                <div class="rules-link">
                    <a href="index.html">üìñ Consulter les r√®gles</a>
                </div>
            </div>

            <!-- Name Input Screen -->
            <div id="name-input-screen" class="screen">
                <h2>Entrez votre nom</h2>
                <input type="text" id="player-name-input" placeholder="Votre nom..." maxlength="20"
                    autocomplete="off">

                <div class="button-group">
                    <button id="name-continue-btn" class="btn btn-primary">Continuer</button>
                    <button id="name-back-btn" class="btn btn-back">Retour</button>
                </div>
            </div>

            <!-- Join Room Screen -->
            <div id="join-screen" class="screen">
                <h2>Rejoindre une Partie</h2>
                <input type="text" id="room-code-input" placeholder="Code de la partie..."
                    maxlength="4" autocomplete="off">
                <p class="hint">Entrez le code √† 4 caract√®res</p>

                <div class="button-group">
                    <button id="join-confirm-btn" class="btn btn-primary">Rejoindre</button>
                    <button id="join-back-btn" class="btn btn-back">Retour</button>
                </div>

                <div id="join-error" class="error-message"></div>
            </div>

            <!-- Waiting Room Screen -->
            <div id="waiting-room-screen" class="screen">
                <div class="room-header">
                    <h2>Salle d'Attente</h2>
                    <div class="room-code-display">
                        <span class="label">Code:</span>
                        <span id="room-code" class="code">----</span>
                    </div>
                    <div class="invitation-link-container">
                        <p class="invitation-label">üîó Lien d'invitation</p>
                        <div class="invitation-input-group">
                            <input type="text" id="invitation-link" class="invitation-link"
                                readonly>
                            <button id="copy-link-btn" class="btn-copy" title="Copier le lien">üìã
                                Copier</button>
                        </div>
                    </div>
                </div>

                <div class="game-master-section">
                    <h3>Ma√Ætre du Jeu</h3>
                    <div id="game-master-list" class="players-list">
                        <!-- Game master will be added dynamically -->
                    </div>
                </div>

                <div class="players-section">
                    <h3>Joueurs (<span id="player-count">0</span>)</h3>
                    <div id="players-list" class="players-list">
                        <!-- Players will be added dynamically -->
                    </div>
                </div>

                <div class="waiting-actions">
                    <button id="start-game-btn" class="btn btn-primary" style="display: none;">
                        üéÆ D√©marrer la Partie
                    </button>
                    <p id="waiting-message" class="waiting-text">En attente du lancement par
                        l'h√¥te...</p>
                    <button id="leave-room-btn" class="btn btn-back">Quitter</button>
                </div>

                <div id="waiting-error" class="error-message"></div>
            </div>

            <!-- Role Reveal Screen -->
            <div id="role-screen" class="screen">
                <div class="role-reveal">
                    <h2>Votre R√¥le</h2>
                    <div class="role-card">
                        <div class="role-image-container">
                            <img id="role-image" src="" alt="Votre r√¥le">
                        </div>
                        <div class="role-info">
                            <h3 id="role-name" class="role-title">---</h3>
                            <span id="role-team" class="role-team-badge">---</span>
                        </div>
                    </div>

                    <div class="role-description-container">
                        <div class="description-section power-section">
                            <div class="section-header">
                                <span class="section-icon">‚ö°</span>
                                <h4>Votre Pouvoir</h4>
                            </div>
                            <p id="role-power" class="section-text">---</p>
                        </div>

                        <div class="description-section info-section">
                            <div class="section-header">
                                <span class="section-icon">üí°</span>
                                <h4>Autres Infos</h4>
                            </div>
                            <p id="role-info" class="section-text">---</p>
                        </div>
                    </div>

                    <!-- Bluff Role Section (only for werewolves) -->
                    <div id="bluff-role-section" class="role-description-container"
                        style="display: none; margin-top: 20px;">
                        <h3
                            style="text-align: center; margin-bottom: 15px; color: #ff6f00; font-weight: bold;">
                            üé≠
                            Votre R√¥le de Couverture</h3>

                        <div style="text-align: center; margin-bottom: 15px;">
                            <div class="role-image-container" style="margin-bottom: 10px;">
                                <img id="bluff-role-image" src="" alt="R√¥le bluff"
                                    style="max-width: 150px; border-radius: 8px;">
                            </div>
                            <div
                                style="padding: 10px; background: #fff3cd; border-radius: 8px; border: 1px solid #ffc107;">
                                <h4 id="bluff-role-name"
                                    style="color: #ff6f00; margin: 0; font-weight: bold;">---</h4>
                            </div>
                        </div>

                        <div class="description-section power-section">
                            <div class="section-header">
                                <span class="section-icon">‚ö°</span>
                                <h4>Pouvoir (Bluff)</h4>
                            </div>
                            <p id="bluff-role-power" class="section-text">---</p>
                        </div>

                        <div class="description-section info-section">
                            <div class="section-header">
                                <span class="section-icon">üí°</span>
                                <h4>Infos (Bluff)</h4>
                            </div>
                            <p id="bluff-role-info" class="section-text">---</p>
                        </div>
                    </div>

                    <!-- Fake Special Info Section (for werewolves with renard/petite-fille bluff) -->
                    <div id="bluff-special-info-section" class="role-description-container"
                        style="display: none; margin-top: 20px;">
                        <h3
                            style="text-align: center; margin-bottom: 15px; color: #ff6f00; font-weight: bold;">
                            üîç
                            Informations du r√¥le de couverture (Bluff)</h3>

                        <div class="description-section info-section">
                            <div class="section-header">
                                <span class="section-icon">üé≠</span>
                                <h4>Ce que vous devriez savoir</h4>
                            </div>
                            <div id="bluff-special-info-content" class="section-text"
                                style="padding: 15px; background: #fff3cd; border-radius: 8px; border: 1px solid #ffc107;">
                            </div>
                        </div>
                    </div>

                    <div class="role-actions">
                        <button id="view-rules-btn" class="btn btn-secondary">
                            üìñ Consulter les R√®gles
                        </button>
                    </div>
                </div>
            </div>

            <!-- Game Master Screen -->
            <div id="game-master-screen" class="screen">
                <div class="game-master-view">
                    <h2>üëë Ma√Ætre du Jeu</h2>
                    <p class="gm-subtitle">Vue d'ensemble de tous les r√¥les</p>

                    <div
                        style="text-align: center; margin-bottom: 20px; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; color: white;">
                        <div style="font-size: 1.2em; font-weight: bold; margin-bottom: 5px;">
                            üéÆ <span id="gm-total-players">0</span> Joueurs
                        </div>
                        <div
                            style="display: flex; justify-content: center; gap: 30px; font-size: 0.95em;">
                            <span>üê∫ <span id="gm-werewolf-count">0</span> Loups-Garous</span>
                            <span>üë• <span id="gm-villager-count">0</span> Villageois</span>
                        </div>
                    </div>

                    <div class="gm-table-container">
                        <table class="gm-table">
                            <thead>
                                <tr>
                                    <th>Joueur</th>
                                    <th>R√¥le</th>
                                    <th>√âquipe</th>
                                    <th>D√©tails</th>
                                </tr>
                            </thead>
                            <tbody id="gm-players-table">
                                <!-- Players and roles will be added dynamically -->
                            </tbody>
                        </table>
                    </div>

                    <div class="gm-actions">
                        <button id="gm-view-rules-btn" class="btn btn-secondary">
                            üìñ Consulter les R√®gles
                        </button>
                    </div>
                </div>
            </div>

            <!-- Connection Status -->
            <div id="connection-status" class="connection-status">
                <span class="status-dot"></span>
                <span class="status-text">Connexion...</span>
            </div>
        </div>

        <!-- Socket.IO Client -->
        <script src="/socket.io/socket.io.js"></script>
        <!-- Waiting Room Script -->
        <script src="js/waiting-room.js"></script>
    </body>

</html>